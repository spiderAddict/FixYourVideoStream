<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Analyseur de vidÃ©os</title>
  <link rel="icon" type="image/png" href="/static/favicon96.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
  <section class="section">
    <div class="container">

      <!-- Header -->
      <div class="level">
        <div class="level-left">
          <!-- left side intentionally left empty -->
        </div>
        <div class="level-right">
          <div class="is-flex is-align-items-center">
            <p class="heading mr-2">Version</p>
            <p class="heading has-text-white has-background-dark" id="appVersion">--</p>
          </div>
          <div class="select ml-4">
            <select id="themeSelector">
              <option value="plex">Plex</option>
              <option value="sonarr">Sonarr</option>
              <option value="jellyfin">Jellyfin</option>
            </select>
          </div>
        </div>
      </div>
      <div class="level">
        <div class="level-right buttons">
          <button class="button is-info" id="rescan">Scan pour nouveaux</button>
          <button class="button is-link" id="analyzeNew">Analyser nouveaux</button>
          <button class="button is-warning" id="analyzeAll">Analyser tout</button>
        </div>
      </div>

      <!-- Layout en colonnes -->
      <div class="columns">
        <!-- Colonne gauche : liste -->
        <div class="column is-half">
          <div class="box">
            <h2 class="title is-4">Fichiers vidÃ©os</h2>
            <div class="level mb-3">
              <div class="level-left">
                <div class="field has-addons mr-2">
                  <div class="control is-expanded">
                    <input id="filterName" class="input" type="text" placeholder="Rechercher par nom...">
                  </div>
                </div>
                <div class="select mr-2">
                  <select id="filterStatus">
                    <option value="">Tous les statuts</option>
                    <option value="analyzed">AnalysÃ©</option>
                    <option value="not_analyzed">Non analysÃ©</option>
                  </select>
                </div>
                <div class="select">
                  <select id="filterLang">
                    <option value="">Toutes les langues</option>
                    <option value="fr">FranÃ§ais</option>
                    <option value="en">Anglais</option>
                    <option value="es">Espagnol</option>
                    <!-- Ajoute d'autres langues si besoin -->
                  </select>
                </div>
              </div>
            </div>
            <div class="table-container">
              <table class="table is-fullwidth is-striped">
                <thead>
                  <tr>
                    <th>Nom</th>
                    <th>Statut</th>
                    <th>Langue</th>
                  </tr>
                </thead>
                <tbody id="fileList"></tbody>
              </table>
            </div>
            <div class="level mt-2">
              <div class="level-left">
                <div class="select">
                  <select id="pageSize">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                </div>
              </div>
              <div class="level-right">
                <nav class="pagination" role="navigation" aria-label="pagination">
                  <a class="pagination-previous" id="prevPage">PrÃ©cÃ©dent</a>
                  <a class="pagination-next" id="nextPage">Suivant</a>
                  <ul class="pagination-list" id="paginationList"></ul>
                </nav>
              </div>
            </div>
          </div>
        </div>

        <!-- Colonne droite : dÃ©tail -->
        <div class="column is-half">
          <div id="detailPane" class="box is-hidden detail-pane"></div>
        </div>
      </div>

      <!-- Templates -->
      <script type="text/template" id="list-item-template">
      <a class="file-item" data-id="{{id}}">
        <span class="icon-text">
          <span>{{filename}}</span>
          <span class="tags ml-2">
            {{status}}
            {{language}}
          </span>
        </span>
      </a>
    </script>

      <script type="text/template" id="detail-template">
      <h3 class="title is-5">{{filename}}</h3>
      <div class="content">
        <p><strong>Path :</strong> <code>{{path}}</code></p>
        <p><strong>AnalysÃ© :</strong> {{analyzed}}</p>
        <p><strong>Langue :</strong> {{language}}</p>
      </div>
      <div class="buttons">
        <button id="analyze" class="button is-link">ðŸ”„ Analyser</button>
        <button id="setFr" class="button is-warning">ðŸ‡«ðŸ‡· Forcer FR</button>
      </div>
    </script>

    </div>
  </section>

  <!-- Loading overlay -->
  <div id="loadingOverlay" class="loading-overlay is-hidden">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p class="loading-text">Chargement en cours...</p>
    </div>
  </div>

  <div id="notification-container" class="notification-container"></div>
  <script src="/static/app.js"></script>
</body>

</html>